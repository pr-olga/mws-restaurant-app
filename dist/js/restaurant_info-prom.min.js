let restaurant;var newMap;document.addEventListener("DOMContentLoaded",()=>{initMap(),fetchRestaurantFromURL(),fetchRestaurantFromURL2()}),initMap=(()=>{const e=getParameterByName("id");DBHelper.fetchRestaurantById(e).then((e=self.restaurant)=>(self.newMap=L.map("map",{center:[e.latlng.lat,e.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoicHItb2xnYSIsImEiOiJjaml3MmEzcDcwZjF6M2tvc2dsc2xhcW9jIn0.C3eNrk94kkZnqDbrgN4pow",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),DBHelper.mapMarkerForRestaurant(e,newMap)))}),fetchRestaurantFromURL=(()=>{const e=getParameterByName("id");console.log(e),DBHelper.fetchRestaurantById(e).then(fillRestaurantHTML)}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.alt=DBHelper.imageAltForRestaurant(e);const n=document.getElementById("picture");n.className="restaurant-img",n.srcset=DBHelper.smallImageUrlForRestaurant(e);const a=document.getElementById("picture--big");if(a.className="restaurant-img",a.srcset=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours){const t=document.getElementById("restaurant-hours"),n=e.operating_hours;for(let e in n){const a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=e,a.appendChild(r);const o=document.createElement("td");o.innerHTML=n[e],a.appendChild(o),t.appendChild(a)}}const r=document.getElementById("reviews-container"),o=document.createElement("h3");if(o.innerHTML="Reviews",r.appendChild(o),!e.reviews){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void r.appendChild(e)}const c=document.getElementById("reviews-list");e.reviews.forEach(e=>{c.appendChild(createReviewHTML(e))}),r.appendChild(c)}),createReviewHTML=(e=>{const t=document.createElement("li"),n=document.createElement("div");t.appendChild(n);const a=document.createElement("p");a.innerHTML=e.name,n.appendChild(a);const r=document.createElement("p");r.innerHTML=e.date,n.appendChild(r);const o=document.createElement("div");o.classList.add("div-content"),t.appendChild(o);const c=document.createElement("p");c.innerHTML=`RATING: ${e.rating}`,o.appendChild(c);const s=document.createElement("p");return s.innerHTML=e.comments,o.appendChild(s),t}),fetchRestaurantFromURL2=(()=>{const e=getParameterByName("id");console.log(e),DBHelper.fetchRestaurantById(e).then(fillBreadcrumb)}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?(console.log(t),decodeURIComponent(n[2].replace(/\+/g," "))):"":null});